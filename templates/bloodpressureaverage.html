<!DOCTYPE html>
<html>
<head>
    <title>血压平均值统计</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .high-risk { color: #dc3545; }
        .middle-risk { color: #ffc107; }
        .low-risk { color: #ffc0cb; }
        .good { color: #28a745; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="row mb-3">
            <div class="col">
                <a href="{{ url_for('blood_pressure_detail') }}" class="btn btn-secondary">返回</a>
            </div>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h4>血压平均值统计</h4>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="form-row">
                        <div class="col-md-4">
                            <label>开始日期</label>
                            <input type="date" class="form-control" name="start_date" required>
                        </div>
                        <div class="col-md-4">
                            <label>结束日期</label>
                            <input type="date" class="form-control" name="end_date" required>
                        </div>
                        <div class="col-md-4">
                            <label>&nbsp;</label>
                            <button type="submit" class="btn btn-primary btn-block">计算</button>
                        </div>
                    </div>
                </form>
                
                {% if average_high != 0 or average_low != 0 %}
                <div class="mt-4">
                    <h5>平均血压值：</h5>
                    {% set risk_class = '' %}
                    {% if average_high > 140 or average_low > 85 %}
                        {% set risk_class = 'high-risk' %}
                    {% elif average_high > 130 or average_low > 80 %}
                        {% set risk_class = 'middle-risk' %}
                    {% elif average_high > 120 or average_low > 80 %}
                        {% set risk_class = 'low-risk' %}
                    {% else %}
                        {% set risk_class = 'good' %}
                    {% endif %}
                    <p class="{{ risk_class }}">
                        高压：{{ "%.1f"|format(average_high) }} mmHg<br>
                        低压：{{ "%.1f"|format(average_low) }} mmHg
                    </p>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</body>
</html> 